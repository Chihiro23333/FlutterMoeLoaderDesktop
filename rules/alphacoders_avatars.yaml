meta:
  name: "alphacoders.avatars"
  headers:
    user-agent: "Dart/3.2 (dart:io)"

options: &OPTIONS
  - id: "category"
    desc: "类型"
    items:
      - { desc: "Anime", param: "3" }
      - { desc: "Animal", param: "2" }
      - { desc: "Abstract", param: "1" }
      - { desc: "Artistic", param: "4" }
      - { desc: "Celebrity", param: "7" }
      - { desc: "Comic", param: "8" }
      - { desc: "Dark", param: "9" }
      - { desc: "Fantasy", param: "11" }
      - { desc: "Food", param: "12" }
      - { desc: "Funny", param: "13" }
      - { desc: "Holiday", param: "15" }
      - { desc: "Man Made", param: "16" }
      - { desc: "Men", param: "17" }
      - { desc: "Military ", param: "18" }
      - { desc: "Movie", param: "20" }
      - { desc: "Music", param: "22" }
      - { desc: "Nature", param: "10" }
      - { desc: "Photography", param: "24" }
      - { desc: "Religious", param: "26" }
      - { desc: "Sci Fi", param: "27" }
      - { desc: "Sports", param: "28" }
      - { desc: "Technology", param: "30" }
      - { desc: "TV Show", param: "29" }
      - { desc: "Vehicles", param: "31" }
      - { desc: "Video Game", param: "32" }
      - { desc: "Woman", param: "33" }

url:
  homePage:
    link: "https://avatars.alphacoders.com/by_category/${category}?page=${page}"
    options:
      *OPTIONS

display:
  homePage:
    columnCount: 7
    aspectRatio: 1

homePage:
  onValidateResult:
    - exception: { code: "403",  action: "challenge" }
  onParseResult:
    list:
      getElements: { cssSelector: 'div[class="avatar-thumb "]' }
      foreach:
        coverUrl:
          get: { cssSelector: "img[class=img-responsive]", attr: "src" }
        href:
          get: { cssSelector: "a", index: 0, attr: "href" }
          format:
            - concat: { start: "https://avatars.alphacoders.com", end: "" }

detailPage:
  onValidateResult:
    - exception: { code: "403",  action: "challenge" }
  onParseResult:
    object:
      url:
        get: { cssSelector: "div[class*=avatar-main] img[class=img-responsive]", attr: "src" }